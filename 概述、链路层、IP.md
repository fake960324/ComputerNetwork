# 概述
* 分层
1. `链路层`
  处理与电缆（或其他任何传输媒介）的物理接口细节。
2. `网络层`
  处理分组在网络中的活动，例如分组选路。`IP`/`ICMP`/`IGMP`
3. `运输层`
  为两台主机上的应用程序提供端到端的通讯。`TCP`/`UDP`
4. `应用层`
  处理特定的应用程序细节
  
* 通过路由器连接的两个网络
  * 端到端系统（end system）
  * 中间系统（intemediate system）
  * 应用层和传输层使用端到端（end to end）协议
  * 网络层提供逐跳（hop to hop）协议
  * 网络ip提供的是一种`不可靠的服务`，他只是尽可能地把分组从源节点送到目的节点，但不提供可靠性保证。
  * TCP在不可靠的IP层上提供一个`可靠的运输层`
  * 互联网的目的之一就是在应用程序中隐藏所有的物理细节
* TCP/IP协议族中不同层次的协议
  * TCP使用不可靠的IP服务，并提供一种*可靠的运输层服务* 。
  * UDP为应用程序发送和接收数据报，和TCP不同，UDP是*不可靠* 的。
  * IP是网络层上的主要协议，同时被TCP和UDP使用。
  * ICMP是IP协议的附属协议

* 封装
  * 以太网数据帧的`物理特性`是其*长度必须在46~1500字节* 之间。
  * 以太网的帧收不也有一个*16bit* 的`帧类型域`（ip,arp,rarp）
  * IP在首部存入一个长度为*8bit* 的数值，称作`协议域`（icmp，igmp，tcp，udp，esp，gre）
  * TCP和UDP都使用一个*16bit*的`端口号`来表示不同的应用程序（ftp，telnet，http）
![帧封装](https://github.com/fake960324/ComputerNetwork/blob/master/Pics/%E5%B8%A7%E5%B0%81%E8%A3%85.jpg)<br>
* 分用
![帧分用](https://github.com/fake960324/ComputerNetwork/blob/master/Pics/%E9%80%9A%E8%AE%AF%E5%B8%A7%E5%88%86%E7%94%A8.jpg)<br>
* 端口号（用于识别应用程序）
  * 服务器一般都是通过`知名端口号`来识别的（tfp 21，telnet 23）。
  * 客户端口号又称作`临时端口号`（即存在时间很短暂）
  * 大多数TCP/IP实现给`临时端口`分配*1024~5000* 之间的端口号。
  * 大于5000的端口号是为其他服务器预留的（Internet上并不常用的服务）
  
# 链路层
* 以太网
  1. 以太网是指数字设备公司，英特尔公司在1982年联合公布的一个标准
  2. 它采用一种称作CSMA/CD的媒体介入方法
  3. 他的速率*10Mb/s* ，地址*48bit*
  
* IEEE 802封装
  1. 802.3针对整个CSMA/CD
  2. 802.4针对令牌总线网络
  3. 802.4针对令牌环网络
  4. 这三者的共同特性由802.2标准来定义，802网络*共有的逻辑链路控制*
* 封装格式
![以太网帧格式](https://github.com/fake960324/ComputerNetwork/blob/master/Pics/%E4%BB%A5%E5%A4%AA%E7%BD%91.jpg)<br>
下方为以太网帧格式<br>
  * 两种种帧格式都采用*48bit* （6字节）的目的地址和源地址
  * ARP和RARP协议对*32bit的IP地址* 和*48bit的硬件地址* 进行映射
  * 802定义*有效长度值* 与以太网有效类型值无一相同，这样就可以对两种帧格式进行区分。
  * 目的服务访问节点（DSAP）和源服务访问点(SSAP)的值都设为0xaa，ctrl字段的值设为0x03，随后的3个字节org code都置位0.在记下来的两个字节类型字段和以太网帧格式一样。
  * 802.3规定数据部分必须至少38字节，对于以太网，则要求最少46字节。为保证这一点，必须在不足的控件插入填充（pad）字节
* 环回接口
  * 传给*环回地址（一般是127.0.0.1）* 的任何数据均作为IP输入（127开头的IP）
  * 传给`广播地址`或`多播地址`的数据报*复制一份传给环回接口*，然后送到以太网上。这是因为广播传送和多播传送的定义包含主机本身。
  * 任何传给该主机IP地址的数据均送到环回接口。
![环回接口](https://github.com/fake960324/ComputerNetwork/blob/master/Pics/%E7%8E%AF%E5%9B%9E%E6%8E%A5%E5%8F%A3.jpg)<br>

  
  
  
